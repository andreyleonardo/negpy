{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://raw.githubusercontent.com/andreyleonardo/negpy/main/schemas/config.schema.json",
    "title": "NegPy CLI Config",
    "description": "Configuration file for the NegPy CLI batch converter (~/.negpy/config.json).",
    "type": "object",
    "additionalProperties": false,
    "properties": {
        "$schema": {
            "type": "string",
            "description": "JSON Schema reference for editor validation and autocomplete."
        },
        "cli": {
            "type": "object",
            "description": "Default values for CLI flags. These are applied when the corresponding flag is not specified on the command line.",
            "additionalProperties": false,
            "properties": {
                "flat_field": {
                    "type": ["string", "null"],
                    "default": null,
                    "description": "Default path to a flat-field reference frame (blank scan) for vignetting correction. Applied automatically unless --flat-field is specified."
                },
                "output": {
                    "type": ["string", "null"],
                    "default": null,
                    "description": "Default output directory. When null, output is computed automatically: <input_dir>/export for single directory input, <parent_dir>/export for single file input, ./export for multiple inputs."
                },
                "mode": {
                    "type": "string",
                    "enum": ["c41", "bw", "e6"],
                    "default": "c41",
                    "description": "Default film type: c41 (color negative), bw (black & white), e6 (slide)."
                },
                "format": {
                    "type": "string",
                    "enum": ["tiff", "jpeg"],
                    "default": "tiff",
                    "description": "Default output format."
                },
                "color_space": {
                    "type": "string",
                    "enum": ["srgb", "adobe-rgb", "prophoto", "wide-gamut", "aces", "p3", "rec2020", "greyscale"],
                    "default": "adobe-rgb",
                    "description": "Default output color space."
                },
                "no_gpu": {
                    "type": "boolean",
                    "default": false,
                    "description": "Disable GPU acceleration by default."
                },
                "crop_offset": {
                    "type": ["integer", "null"],
                    "minimum": -5,
                    "maximum": 20,
                    "default": null,
                    "description": "Default autocrop border offset in pixels (-5 to 20)."
                },
                "dust_remove": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable automatic dust spot removal by default."
                },
                "dust_threshold": {
                    "type": ["number", "null"],
                    "minimum": 0.01,
                    "maximum": 1.0,
                    "default": null,
                    "description": "Default dust detection sensitivity (0.01-1.0). Lower values detect more spots."
                },
                "dust_size": {
                    "type": ["integer", "null"],
                    "minimum": 3,
                    "maximum": 8,
                    "default": null,
                    "description": "Default maximum dust spot size in pixels (3-8)."
                },
                "filename_pattern": {
                    "type": "string",
                    "default": "positive_{{ original_name }}",
                    "description": "Default Jinja2 filename template for exported files."
                },
                "roll_average": {
                    "type": "boolean",
                    "default": false,
                    "description": "Enable roll normalization by default. Analyzes all files first to compute a shared normalization baseline for consistent color across a roll."
                }
            }
        },
        "processing": {
            "$ref": "https://raw.githubusercontent.com/andreyleonardo/negpy/main/schemas/preset.schema.json",
            "description": "Default processing parameters. Same format as preset files."
        }
    }
}
